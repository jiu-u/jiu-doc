# Python ä¸­çš„ `uv` ä½¿ç”¨æŒ‡å—ï¼šä¸‹ä¸€ä»£ Python åŒ…ç®¡ç†å·¥å…·

`uv` æ˜¯ä¸€ä¸ªç”± [Astral](https://astral.sh/) å›¢é˜Ÿå¼€å‘çš„é«˜æ€§èƒ½ Python åŒ…ç®¡ç†å·¥å…·ï¼Œæ—¨åœ¨æ›¿ä»£ `pip` å’Œ `pip-tools`ï¼Œæä¾›æ›´å¿«çš„ä¾èµ–è§£æå’Œå®‰è£…é€Ÿåº¦ã€‚`uv` åŸºäº Rust å®ç°ï¼Œä¸“ä¸ºç°ä»£ Python é¡¹ç›®è®¾è®¡ï¼Œæ”¯æŒè™šæ‹Ÿç¯å¢ƒç®¡ç†ã€ä¾èµ–é”å®šå’Œå¿«é€Ÿå®‰è£…ç­‰åŠŸèƒ½ã€‚

æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•å®‰è£…å’Œä½¿ç”¨ `uv`ï¼Œå¹¶é€šè¿‡ä»£ç ç¤ºä¾‹å±•ç¤ºå…¶æ ¸å¿ƒåŠŸèƒ½ã€‚

---

## 1. å®‰è£… `uv`

`uv` å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

å®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼š

```bash
uv --version
```

å¦‚æœå®‰è£…æˆåŠŸï¼Œä½ å°†çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š

```
uv 0.1.0
```

---

## 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

`uv` æ”¯æŒå¿«é€Ÿåˆ›å»ºå’Œç®¡ç†è™šæ‹Ÿç¯å¢ƒã€‚ä»¥ä¸‹å‘½ä»¤å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒï¼š

```bash
uv venv .venv
```

è¿™å°†åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º `.venv` çš„è™šæ‹Ÿç¯å¢ƒã€‚æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š

- åœ¨ Linux/macOS ä¸Šï¼š

  ```bash
  source .venv/bin/activate
  ```

- åœ¨ Windows ä¸Šï¼š

  ```bash
  .\.venv\Scripts\activate
  ```

---

## 3. å®‰è£…ä¾èµ–

`uv` å¯ä»¥åƒ `pip` ä¸€æ ·å®‰è£… Python åŒ…ã€‚ä¾‹å¦‚ï¼Œå®‰è£… `requests` åº“ï¼š

```bash
uv pip install requests
```

ä½ è¿˜å¯ä»¥é€šè¿‡ `requirements.txt` æ–‡ä»¶æ‰¹é‡å®‰è£…ä¾èµ–ï¼š

```bash
uv pip install -r requirements.txt
```

---

## 4. ç”Ÿæˆé”æ–‡ä»¶

`uv` æ”¯æŒç”Ÿæˆé”æ–‡ä»¶ï¼ˆ`requirements.lock`ï¼‰ï¼Œä»¥ç¡®ä¿ä¾èµ–ç‰ˆæœ¬çš„ä¸€è‡´æ€§ã€‚ä»¥ä¸‹å‘½ä»¤å¯ä»¥ä» `requirements.txt` ç”Ÿæˆé”æ–‡ä»¶ï¼š

```bash
uv pip compile requirements.txt -o requirements.lock
```

ç”Ÿæˆçš„ `requirements.lock` æ–‡ä»¶å†…å®¹ç¤ºä¾‹ï¼š

```
requests==2.31.0
certifi==2023.7.22
charset-normalizer==3.3.2
idna==3.4
urllib3==2.0.7
```

---

## 5. ä»é”æ–‡ä»¶å®‰è£…ä¾èµ–

ä½¿ç”¨é”æ–‡ä»¶å®‰è£…ä¾èµ–å¯ä»¥ç¡®ä¿å®‰è£…çš„ç‰ˆæœ¬ä¸é”æ–‡ä»¶ä¸€è‡´ï¼š

```bash
uv pip install -r requirements.lock
```

---

## 6. å¿«é€Ÿä¾èµ–è§£æ

`uv` çš„ä¾èµ–è§£æé€Ÿåº¦æ¯” `pip` å¿«å¾—å¤šã€‚ä»¥ä¸‹å‘½ä»¤å¯ä»¥å¿«é€Ÿè§£æå¹¶å®‰è£…ä¾èµ–ï¼š

```bash
uv pip install "fastapi[all]"
```

---

## 7. ä¸ `pip-tools` å…¼å®¹

`uv` å…¼å®¹ `pip-tools` çš„å·¥ä½œæµã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ `uv` æ›¿ä»£ `pip-compile` æ¥ç”Ÿæˆé”æ–‡ä»¶ï¼š

```bash
uv pip compile requirements.in -o requirements.txt
```

---

## 8. æ€§èƒ½å¯¹æ¯”

`uv` çš„æ€§èƒ½æ˜¾è‘—ä¼˜äº `pip` å’Œ `pip-tools`ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„æ€§èƒ½å¯¹æ¯”ï¼š

| å·¥å…·          | ä¾èµ–è§£ææ—¶é—´ | å®‰è£…æ—¶é—´ |
|---------------|--------------|----------|
| `pip`         | 10.2s        | 15.3s    |
| `pip-tools`   | 8.5s         | 14.7s    |
| `uv`          | 1.3s         | 5.2s     |

---

## 9. ç¤ºä¾‹é¡¹ç›®

ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ `uv` ç®¡ç†ä¾èµ–çš„ç¤ºä¾‹é¡¹ç›®ï¼š

### 9.1 åˆ›å»ºé¡¹ç›®

```bash
mkdir myproject
cd myproject
uv venv .venv
source .venv/bin/activate
```

### 9.2 æ·»åŠ ä¾èµ–

åˆ›å»ºä¸€ä¸ª `requirements.in` æ–‡ä»¶ï¼š

```
fastapi
uvicorn
```

ç”Ÿæˆé”æ–‡ä»¶ï¼š

```bash
uv pip compile requirements.in -o requirements.txt
```

å®‰è£…ä¾èµ–ï¼š

```bash
uv pip install -r requirements.txt
```

### 9.3 ç¼–å†™ä»£ç 

åˆ›å»ºä¸€ä¸ª `main.py` æ–‡ä»¶ï¼š

```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/")
def read_root():
    return {"message": "Hello, World!"}
```

è¿è¡Œåº”ç”¨ï¼š

```bash
uvicorn main:app --reload
```

è®¿é—® `http://127.0.0.1:8000/`ï¼Œä½ å°†çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š

```json
{
  "message": "Hello, World!"
}
```

---

## 10. æ€»ç»“

`uv` æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Python åŒ…ç®¡ç†å·¥å…·ï¼Œæä¾›äº†æ¯” `pip` å’Œ `pip-tools` æ›´å¿«çš„ä¾èµ–è§£æå’Œå®‰è£…é€Ÿåº¦ã€‚é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº† `uv` çš„åŸºæœ¬ç”¨æ³•ï¼Œå¹¶èƒ½å¤Ÿåœ¨é¡¹ç›®ä¸­ä½¿ç”¨å®ƒæ¥ç®¡ç†ä¾èµ–ã€‚

å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº `uv` çš„åŠŸèƒ½ï¼Œå¯ä»¥è®¿é—®å…¶å®˜æ–¹æ–‡æ¡£ï¼š[https://github.com/astral-sh/uv](https://github.com/astral-sh/uv)ã€‚

Happy coding! ğŸš€